@if (form != null) {
  <form (ngSubmit)="closeDialog()" [formGroup]="form">
    @if (!data || !data.email) {
      <mat-form-field>
        <input formControlName="email" matInput placeholder="Email" required type="email">
      </mat-form-field>
    }
    @if (data && data.email) {
      <h3 class="mat-h3">{{ data.email }}</h3>
    }

    @if (form.controls['password'].enabled) {
      <mat-form-field>
        <input formControlName="password" matInput placeholder="Password" required type="password">
      </mat-form-field>
    }

    <mat-form-field>
      <mat-select formControlName="roles" matInput multiple placeholder="Role">
        @for (role of roles; track role) {
          <mat-option [value]="role">
            {{ role }}
          </mat-option>
        }
      </mat-select>
    </mat-form-field>

    @if (!data) {
      <button [disabled]="form.invalid" class="btn" mat-raised-button type="submit">
        <mat-icon>add_to_queue</mat-icon>
        Create
      </button>
    }
    @if (data) {
      <button [disabled]="form.invalid" class="btn" mat-raised-button type="submit">
        <mat-icon>update</mat-icon>
        Update
      </button>
      <button (click)="destroy = true" class="btn" mat-raised-button type="submit">
        <mat-icon>delete</mat-icon>
        Delete
      </button>
    }
  </form>
}
